<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin="" />
    <link rel="stylesheet" href="js/clusters/MarkerCluster.css">
    <link rel="stylesheet" href="js/clusters/MarkerCluster.Default.css">
    <link rel="stylesheet" href="js/leaflet/easy-button.css">
    <link rel="stylesheet" href="js/leaflet/leaflet-control-boxzoom.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.1/css/ion.rangeSlider.min.css"/>
    <link rel="stylesheet" href="css/style.css">
    <link rel="apple-touch-icon" sizes="57x57" href="ico/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="ico/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="ico/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="ico/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="ico/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="ico/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="ico/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="ico/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="ico/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="ico/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="ico/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="ico/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="ico/favicon-16x16.png">
    <link rel="manifest" href="ico/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="ico/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <title>Black Sea Representation Virtual Map: Map</title>
</head>
<body>

    <div class="wrapper">
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary main-menu">
            <a class="navbar-brand navbar-logo" href="./">BSRVM</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
          
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                  <a class="nav-link" href="./">მთავარი <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="about.html">შესახებ</a>
                </li>
                <li class="nav-item active">
                  <a class="nav-link" href="map-new.html">რუკა</a>
                </li>
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    ტექსტები
                  </a>
                  <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="literature-nar.html">ლიტერატურული ნარატივი</a>
                    <a class="dropdown-item disabled" href="history-nar.html">ისტორიული ნარატივი</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="comparission.html">შედარებითი ანალიზი</a>
                  </div>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="vis.html">
                    ვიზუალიზაცია
                  </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="publications.html">
                      პუბლიკაციები
                    </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="gallery.html">
                    გალერეა
                  </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link language" href="#english" data-toggle="modal">
                    Eng
                  </a>
                </li>
              </ul>
            </div>
        </nav>
        <div id="mymap">
            <div class="output-wrapper">
                <span id="outputFrom"></span> 
                <span class="px-1"></span> 
                <span id="outputTo"></span>
            </div>
        </div>
        <div class="container-fluid py-4">
            <div id="timeline">
                <input type="text" class="js-range-slider" name="year-range" value="" />
            </div>
        </div>

        <div class="cookie-banner" style="display: none;">
          <p>ამ ვებგვერდის გამოყენებით თქვენ ეთანხმებით ილიაუნის <a href="https://iliauni.edu.ge/ge/privacy-policy" target="blank">კონფიდენციალურობისა</a> და <a href="https://iliauni.edu.ge/ge/cookie-files" target="blank">ქუქი-ფაილების</a> პოლიტიკას.</p>
          <div>
              <button class="btn btn-primary close-cookies">თანახმობა</button>
          </div>
        </div>

        <footer class="d-print-none">
            <div class="footer">
              <div>
                <a href="https://www.iliauni.edu.ge"><img src="img/isu-logo.svg" alt="ISU"></a>
                <a href="mailto:dh@iliauni.edu.ge"><img src="img/dh-isu.svg" alt="DH@ISU" style="height: 30px;"></a>
              </div>
              <div>© 2021 <span id="current-date-ft"></span> ილიას სახელმწიფო უნივერსიტეტი. შედარებითი ლიტერატურის ინსტიტუტი</div>
            </div>
        </footer>
        
    </div>

  <!-- English description modal -->

<div class="modal modal-lang fade" id="english" tabindex="-1" role="dialog" aria-labelledby="englishDescription" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
          <h1 class="modal-title" id="englishModalLabel">Black Sea Representation in Literary and Historical sources (BSRLH)</h1>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
      </div>
      <div class="modal-body">
          <p>Black Sea Representation in Literary and Historical sources (BSRLH) has been funded by the Ilia State University (ISU) and its Institute of Comparative Literature...</p>
          <p><span>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Quisquam explicabo eaque, numquam hic id dolorem labore autem iure nihil exercitationem. Suscipit ullam assumenda in, temporibus possimus nesciunt officia quo similique?</span><span>Dolore eum sunt labore velit voluptas omnis voluptates, error molestias harum adipisci vitae cum maiores quisquam explicabo cupiditate mollitia quibusdam, quasi illo unde consectetur eligendi aut! Necessitatibus tempora iusto maiores.</span><span>Quis vero quae consequatur maxime? Explicabo error odit sed, doloribus atque placeat omnis perferendis laborum, quaerat eligendi dignissimos officia nihil cumque eius corporis officiis impedit fugiat! Dolorem rerum totam deleniti!</span><span>Voluptates nemo nihil eligendi expedita velit ipsam tenetur, quos neque non quae laborum itaque cumque tempore explicabo? Id nobis fugiat, nesciunt aut unde, alias distinctio odio cum voluptate itaque omnis!</span><span>Debitis reiciendis magni suscipit minus nostrum reprehenderit iste officia sed, laborum, quidem dolore, provident atque quam placeat ut neque praesentium esse rem repellendus ipsa in eligendi! Impedit et nulla adipisci.</span><span>Dolorem, assumenda hic. Delectus eveniet, obcaecati cum ea ullam neque quae quibusdam accusantium quis incidunt nisi nobis odio consequuntur saepe itaque id tempora ipsam perferendis reiciendis blanditiis placeat tenetur sapiente.</span><span>Dolor eius nulla, magni obcaecati rem labore, tempora harum eum modi porro deserunt eaque aspernatur officiis magnam. Dolor itaque excepturi sunt aspernatur modi minima, vero molestiae laborum ad tenetur delectus?</span><span>Fuga quae praesentium blanditiis, quia at adipisci ipsam quos nisi sit quaerat totam a modi corrupti magnam nemo corporis earum voluptate. Non vel, consequatur doloribus culpa labore porro fuga quos?</span><span>Officiis commodi, fuga rerum asperiores unde, et amet natus voluptatum recusandae ab porro vitae delectus tempore a. Voluptatum accusantium et repellendus animi nisi? Nostrum ad ipsa, deleniti quia exercitationem id.</span><span>Ex quam consequatur eligendi qui iure harum earum, similique soluta facilis aut, autem saepe aliquam, perspiciatis magnam ratione atque architecto! Temporibus omnis hic commodi quaerat facere veniam voluptas quos blanditiis?</span></p>
      </div>
      <div class="modal-footer">
          <p>&#169; 2021 <span class="current-year-eng"></span>. Ilia State University, <a href="https://research.iliauni.edu.ge/en/institution/3-institute-of-comparative-literature" target="blank">Institute of Comparative Literature</a>.</p>
      </div>
    </div>
  </div>
</div>


    <script src="js/jquery-3.6.0.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/leaflet/leaflet.js"></script>
    <script src="js/clusters/leaflet.markercluster.js"></script>
    <script src="js/leaflet/easy-button.js"></script>
    <script src="js/leaflet/leaflet-control-boxzoom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.1/js/ion.rangeSlider.min.js"></script>
    <script src="data/data.js"></script>

    <script>

        // Generate year in footer
        var currentYear = new Date().getFullYear();      
        if (currentYear > 2021) {
            document.getElementById("current-date-ft").innerHTML = " - " + currentYear;
            document.querySelector(".current-year-eng").innerHTML = " - " + currentYear;
        }

        // Leaflet map
        const map = L.map('mymap', {
            center: [44.0016,41],
            zoom: 6,
            animate: true, duration: 1
        });

        const osm = L.tileLayer('http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}',{
            maxZoom: 20,
            subdomains:['mt0','mt1','mt2','mt3']
        }).addTo(map);

        const geojsonMarkerOptions = {
            radius: 8,
            fillColor: "#003e59",
            color: "#000",
            weight: 1,
            opacity: 1,
            fillOpacity: 0.8
        };

        const markers = L.markerClusterGroup();

        L.geoJSON(data, {
            onEachFeature: function (feature, layer) {
                const popupContent = 
                `
                <h3>${feature.properties.placename}</h3>
                <div class="">
                    <dl class="map-data-list row py-0 my-0">
                        <dt class="col-lg-4">რეგიონი:</dt>
                        <dd class="col-lg-8">${feature.properties.region}</dd>
                        <dt class="col-lg-4">კატეგორია:</dt>
                        <dd class="col-lg-8">${feature.properties.category}</dd>
                        <dt class="col-lg-4">ავტორი:</dt>
                        <dd class="col-lg-8">${feature.properties.author}</dd>
                        <dt class="col-lg-4">ნაწარმოების სახელწოდება:</dt>
                        <dd class="col-lg-8">${feature.properties.textTitle}</dd>
                        <dt class="col-lg-4">ტექსტის ტიპი:</dt>
                        <dd class="col-lg-8">${feature.properties.textType}</dd>
                        <dt class="col-lg-4">თარიღი:</dt>
                        <dd class="col-lg-8">${feature.properties.textDate}</dd>
                        <dt class="col-lg-12"></dt>
                        <dd class="col-lg-12"><a href="record.html">დაწვრილებით</a></dd>
                    </dl>
                </div>
                `
                layer.bindPopup(popupContent);
            },
            pointToLayer: function (feature, latlng) {
                return markers.addLayer(L.circleMarker(latlng, geojsonMarkerOptions));
            }

        }).addTo(map);

        map.addLayer(markers);

        // Box-zoom control
        L.Control.boxzoom({
            position:'topleft',
            keepOn: false
        }).addTo(map);

        // Easy buttons control to reset map position
        L.easyButton('fas fa-globe', function(){
            map.setView([44.0016,41], 6);
        }, 'რუკის რეპოზიციონირება').addTo(map);

        // Slider
        const outputFrom = document.querySelector("#outputFrom");
        const outputTo = document.querySelector("#outputTo");

        currentYear = new Date().getFullYear();

        $(".js-range-slider").ionRangeSlider({
            type: "double",
            min: -357,
            max: currentYear,
            from: 500,
            to: 900,
            grid: true,
            onStart: function (data) {
                // Called right after range slider instance initialised
                outputFrom.innerHTML = data.from + ' - დან';
                outputTo.innerHTML = data.to + ' - მდე';
            },
            onChange: function (data) {
                // Called every time handle position is changed
            },
            onFinish: function (data) {
                // Called then action is done and mouse is released
                outputFrom.innerHTML = data.from + ' - დან';
                outputTo.innerHTML = data.to + ' - მდე';
            },
            onUpdate: function (data) {
                // Called then slider is changed using Update public method
            }
        });

        // Coockies
        if (localStorage.getItem('cookieSeen') != 'shown') {
            $(".cookie-banner").delay(2000).fadeIn();
            localStorage.setItem('cookieSeen','shown')
        };
            $(".close-cookies").click(function() {
            $(".cookie-banner").fadeOut();
        })

    </script>
</body>
</html>